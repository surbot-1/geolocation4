<!DOCTYPE html>
<html>
  
<head> 
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
 <title>editApp</title>

  <style> 
    
    body {
      background-color: #E0E0E0;
      width: 450px;
      height: 2400px;
      margin: 0px; 
      padding: 0px;
    }
    
    .p1 {
      color: #000000;
      font-size: 20px;
      margin-left: 20px;
    } 
    
    .div1 {
      font-size: 40px;
      font-weight: bold;
      color: #009900;
      margin-top: 20px;
      margin-left: 20px;
    }
    
    .button1 { 
      font-size: 20px; 
      margin-left: 20px;
    }
    
    .p2 {
      color: #0000AA;
      font-size: 20px; 
      margin-left: 20px;
    } 
    
    
    .p3 {
      color: #0000AA;
      font-size: 20px; 
      margin-left: 20px;
    } 
    
    .p4 {
      color: #AA0000;
      font-size: 10px;
      margin-top: 20px;
      margin-left: 20px;
    }

  </style>

</head>
 

<body>

  <div class="div1">editApp-SFAS-BSNL</div>
 
  <p class="p1"> 
   Get Geolocation Latitude and Longitude <br>
   Accuracy depends on device <br>
   Recommended device - Apple's iPhone
  </p> 
 
  <button class="button1" onclick="getlocation()">
    Click to get coordinates
  </button>
  <button class="button1" onclick="save()">
    Save
  </button>
  <button class="button1" onclick="read()">
    Read
  </button> 
  
  <p class="p2" id="demo2"></p>
  <p class="p3" id="demo3"> 
    <input type="text" class="input" id="franchise" placeholder="Franchise Name and Code"> <br>
    <input type="text" class="input" id="fos" placeholder="FOS Name and Code"> <br>
    <br>
    <input type="text" class="input" id="ctopno" placeholder="CTOPUP No."> <br>
    <input type="text" class="input" id="altno" placeholder="Alternate No."> <br>
    <input type="text" class="input" id="emailid" placeholder="Email ID"> <br>
    <input type="text" class="input" id="retname" placeholder="Retailer Name"> <br>
    <input type="text" class="input" id="retgend" placeholder="Gender"> <br>
    <input type="text" class="input" id="shopname" placeholder="Shop Name"> <br>
    <br>
    <input type="text" class="input" id="shopno" placeholder="Shop No."> <br>
    <input type="text" class="input" id="street" placeholder="Street/Village"> <br>
    <input type="text" class="input" id="landmark" placeholder="Landmark/PO"> <br>
    <input type="text" class="input" id="locality" placeholder="Locality/Tehsil"> <br>
    <input type="text" class="input" id="city" placeholder="City/District"> <br>
    <input type="text" class="input" id="state" placeholder="State/UT"> <br>
    <input type="text" class="input" id="pincode" placeholder="PIN Code"> <br>
    <br> 
    <input type="text" class="input" id="visitedby" placeholder="Visited By"> 
    <input type="button" class="input" id="preview" value="Preview" onclick="preview()"> 
  </p>
  <p class="p4" id="demo4"></p> 
  
  <script type = "text/javascript"> 
         
         //prefixes of implementation that we want to test
         window.indexedDB = window.indexedDB || window.mozIndexedDB || 
         window.webkitIndexedDB || window.msIndexedDB;
         
         //prefixes of window.IDB objects
         window.IDBTransaction = window.IDBTransaction || 
         window.webkitIDBTransaction || window.msIDBTransaction;
         window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || 
         window.msIDBKeyRange; 
         
         if (!window.indexedDB) {
            window.alert("Your browser doesn't support a stable version of IndexedDB."); 
         } // else { alert('Ok'); }
         var db;
         var request = window.indexedDB.open("newDatabase", 1); 
         request.onerror = function(event) {
            alert("error: ");
         }; 
         request.onsuccess = function(event) {
            db = request.result;
           // alert("success: "+ db);
         }; 
         request.onupgradeneeded = function(event) {
            var db = event.target.result;
            var objectStore = db.createObjectStore("posbsnl", {keyPath: "ctopno"}); 
         } 
    
  </script>
 
  <script> 
    
    var lat; 
    var lng; 
    var franchise; 
    var fos; 
    var ctopno; 
    var altno; 
    var emailid; 
    var retname; 
    var retgend; 
    var shopname; 
    var shopno; 
    var street; 
    var landmark;
    var locality;
    var city; 
    var state; 
    var pincode; 
    var visitedby; 

    var variable2 = document.getElementById("demo2"); 
    var variable3 = document.getElementById("demo3"); 
    var variable4 = document.getElementById("demo4"); 
    
    function getlocation() {
      navigator.geolocation.getCurrentPosition(showLoc, errHand);
    }

    function showLoc(pos) {
      variable2.innerHTML =
        "Latitude  : " +
        pos.coords.latitude +
        "<br>" + 
        "Longitude : " +
        pos.coords.longitude; 
      lat = pos.coords.latitude ;
      lng = pos.coords.longitude ;
    }
 
    function errHand(err) {
      
      switch (err.code) {
          
        case err.PERMISSION_DENIED:
          variable1.innerHTML =
            "The application doesn't have the" +
            "permission to make use of location services";
          break;

        case err.POSITION_UNAVAILABLE:
          variable1.innerHTML = "The location of the device is uncertain";
          break;

        case err.TIMEOUT:
          variable1.innerHTML = "The request to get user location timed out";

          break;

        case err.UNKNOWN_ERROR:
          variable1.innerHTML =
            "Time to fetch location information exceeded" +
            "the maximum timeout interval";
          break;

      }

    } 
    
    function preview() {
      franchise = document.getElementById("franchise").value; 
      fos = document.getElementById("fos").value; 
      ctopno = document.getElementById("ctopno").value; 
      altno = document.getElementById("altno").value; 
      emailid = document.getElementById("emailid").value; 
      retname = document.getElementById("retname").value; 
      retgend = document.getElementById("retgend").value; 
      shopname = document.getElementById("shopname").value; 
      shopno = document.getElementById("shopno").value; 
      street = document.getElementById("street").value; 
      landmark = document.getElementById("landmark").value;
      locality = document.getElementById("locality").value;
      city = document.getElementById("city").value; 
      state = document.getElementById("state").value; 
      pincode = document.getElementById("pincode").value; 
      visitedby = document.getElementById("visitedby").value; 
      
      variable3.innerHTML ="";
      variable3.innerHTML =
        "Franchise       : " + franchise + "<br>" +
        "FOS             : " + fos + "<br>" + 
        "<br>" +
        "CTOPUP No       : " + ctopno + "<br>" +
        "Alternate No    : " + altno + "<br>" +
        "Email ID        : " + emailid + "<br>" +
        "Retailer Name   : " + retname + "<br>" +
        "Gender          : " + retgend + "<br>" +
        "Shop Name       : " + shopname + "<br>" + 
        "<br>" +
        "Shop No         : " + shopno + "<br>" +
        "Street/Village  : " + street + "<br>" +
        "Landmark/PO     : " + landmark + "<br>" +
        "Locality/Tehsil : " + locality + "<br>" +
        "City/District   : " + city + "<br>" +
        "State/UT        : " + state + "<br>" +
        "PIN Code        : " + pincode + "<br>" +
        "<br>" +
        "Visited By : " + visitedby ;
    } 
    
    function save() {
        var request = db.transaction(["posbsnl"], "readwrite")
       .objectStore("posbsnl")
       .add({ 
           lat: lat, 
           lng: lng, 
           franchise: franchise, 
           fos: fos, 
           ctopno: ctopno, 
           altno: altno, 
           emailid: emailid, 
           retname: retname,
           retgend: retgend,
           shopname: shopname, 
           shopno: shopno, 
           street: street, 
           landmark: landmark, 
           locality: locality, 
           city: city, 
           state: state, 
           pincode: pincode, 
           visitedby: visitedby
       }); 
       request.onsuccess = function(event) {
         alert("Saved"); 
       };  
       request.onerror = function(event) {
          alert("Already exist");
       }; 
    }
    
    function read() { 
       var toread = document.getElementById("ctopno").value;
       var transaction = db.transaction(["posbsnl"]);
       var objectStore = transaction.objectStore("posbsnl");
       var request = objectStore.get(toread); 
       request.onsuccess = function(event) {
               // Do something with the request.result!
               if(request.result) { 
                  var franchise = request.result.franchise; 
                  var fos = request.result.fos; 
                  var ctopno = request.result.ctopno;  
                  var altno = request.result.altno;  
                  var emailid = request.result.emailid; 
                  var retname = request.result.retname;  
                  var retgend = request.result.retgend;  
                  var shopname = request.result.shopname; 
                  var shopno = request.result.shopno; 
                  var street = request.result.street;  
                  var landmark = request.result.landmark;  
                  var locality = request.result.locality; 
                  var city = request.result.city;  
                  var state = request.result.state;  
                  var pincode = request.result.pincode;  
                  var visitedby = request.result.visitedby; 
               } else {
                  alert(toread + " " + "couldn't be found!");
               }
            }; 
      request.onerror = function(event) {
               alert("Unable to retrieve!");
            };
    }
    
    function remove() {
      
    }
    
    variable4.innerHTML = 
        "We respect our client's privacy" + 
        "<br>We do not store or share client's information"; 

  </script>

</body>
</html>











